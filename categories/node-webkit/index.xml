<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>node-webkit on VoidMain&#39;s Blog</title>
    <link>http://blog.voidmain.guru/categories/node-webkit/</link>
    <description>Recent content in node-webkit on VoidMain&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-CN</language>
    <lastBuildDate>Sat, 31 May 2014 15:38:27 +0000</lastBuildDate>
    
	<atom:link href="http://blog.voidmain.guru/categories/node-webkit/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>在node-webkit中使用sqlite3</title>
      <link>http://blog.voidmain.guru/posts/2014-05-31-pain-in-the-ass-node-webkit-with-sqlite3/</link>
      <pubDate>Sat, 31 May 2014 15:38:27 +0000</pubDate>
      
      <guid>http://blog.voidmain.guru/posts/2014-05-31-pain-in-the-ass-node-webkit-with-sqlite3/</guid>
      <description>这两天在调研使用node-webkit开发Mac应用并且提交到Mac App Store的可能性。这类客户端应用有非常通用的一点就是需要一个本地数据存储功能。根据node-webkit的官方wiki，我觉得最适合的就是所谓的Web SQL Database了，同时文档中也说是使用sqlite3来实现的。因此就需要实现sqlite3与node-webkit的整合。
为了测试，我直接clone了一个windows版的demo。最开始我的尝试是使用node-webkit 0.9.2版（使用最新版的目的是为了保证node-webkit没有使用一些过时的或者private的api导致MAS审核悲剧）。首先我用npm install sqlite3安装了sqlite3 for node，结束之后运行nw node-webkit-sqlite3-windows-demo，结果提示error：
Error: Cannot find module &#39;/Users/voidmain/WorkSpace/NodeJS/node-webkit-sqlite3-windows-demo/node_modules/sqlite3/lib/binding/node-v11-darwin-ia32/node_sqlite3.node&#39;  如果直接google这个错误会有人说明使用nw-gyp rebuild --target=&amp;lt;node-webkit-version&amp;gt; --arch=ia32来rebuild一下（如果没有安装nw-gyp的话需要先npm install一下），但是使用node-webkit 0.9.2的话，编译不会通过，会提示有error，于是继续google，终于在sqlite3项目的issue 265中看到了这个：
看来是死胡同了，无奈只能使用更早版本的node-webkit，所以我换成了node-webkit 0.8.6版，然后再次用nw-gyp编译，还是出错，错误是Undefined variable module_name in binding.gyp while trying to load binding.gyp，继续google，最后又在wiki中找到了解答：Build native modules with nw gyp，关键的一段是：
 For some packages you may need to use node-pre-gyp (e.g. when you get the error &amp;ldquo;Undefined variable module_name in binding.gyp while trying to load binding.gyp&amp;rdquo;), which supports building for both node.</description>
    </item>
    
  </channel>
</rss>